# Kola - Konfig Language

use std.str.String
use std.num.Int



# Opaque Types ?
# Name := String

Array 'a : __array 'a 

Pet : {
    name: Name,
    age: Int,
    life_expectancy: Int,
}

Dog : Pet & {
    food: (Array String)
}

Cat : {
    name: Name,
    age: Int,
    life_expectancy: Int,
    color: String,
}


to_pet : (_ & Pet) -> Pet
to_pet = fun { }

def to_pet = fun { pet: _ & Pet } => 

def years_to_live = fun (pet: _ & Pet) => let
    rem = (pet.life_expectancy - pet.age)
in
    rem

def merge_years_to_live = fun pet : (_ & Pet) -> Int  => let
    rem = (years_to_live pet)
in
    pet & { rem = rem }

def CONST = "some const string"

def SOME_DOG: Dog = {
    name = "bello",
    age = 6,
    life_expectancy = 10,
    food = ["sausages"],
}

def EXPECTED_DOG = {
    name = "bello",
    age = 6,
    life_expectancy = 10,
    food = ["sausages"],
    rem = 4,
}

(assert_eq (merge_years_to_live SOME_DOG) EXPECTED_DOG)